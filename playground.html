<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Vector Visualizer with \vec{AE} = Expression</title>
        <style>
            /* CSS with semicolons */
            body {
                margin: 0;
                padding: 0;
                display: flex;
                font-family: sans-serif;
                height: 100vh;
            }
            #panel {
                width: 300px;
                padding: 10px;
                box-sizing: border-box;
                background: #f0f0f0;
                border-right: 1px solid #ccc;
                overflow-y: auto;
                position: relative;
            }
            #input_form {
                display: flex;
                gap: 5px;
                margin-bottom: 10px;
                position: relative;
            }
            #vector_input {
                flex: 1;
            }
            #canvas_container {
                position: relative;
            }
            #items_list {
                margin-top: 10px;
            }
            .item_entry {
                margin: 5px 0;
                padding: 5px;
                background: #ffffff;
                border: 1px solid #ccc;
                border-radius: 3px;
                word-break: break-all;
            }
            .item_title {
                font-weight: bold;
                margin-bottom: 3px;
            }
            .segment_description {
                margin-left: 10px;
                font-style: italic;
            }

            /* The autocomplete container also contains an error box at the bottom. */
            #autocomplete_container {
                position: absolute;
                background: #fff;
                border: 1px solid #ccc;
                border-radius: 3px;
                z-index: 9999;
                max-height: 200px;
                width: 100%;
                display: flex;
                flex-direction: column;
            }

            #autocomplete_suggestions {
                flex: 1 1 auto;
                overflow-y: auto;
            }
            #autocomplete_error {
                flex: 0 0 auto;
                color: red;
                font-size: 0.9em;
                background: #fff8f8;
                border-top: 1px solid #ccc;
                padding: 3px;
                min-height: 20px;
            }
            .autocomplete_item {
                padding: 5px;
                cursor: pointer;
                white-space: nowrap;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            .autocomplete_item:hover {
                background-color: #e0e0e0;
            }
            .autocomplete_selected {
                background-color: #d0d0d0;
            }
            .highlight_match {
                color: blue;
                font-weight: bold;
            }
            .autocomplete_desc {
                color: #999;
                font-size: 0.9em;
                margin-left: 10px;
            }
            /* Hidden mirror for caret measurement */
            #input_mirror {
                position: absolute;
                visibility: hidden;
                white-space: pre-wrap;
                word-wrap: break-word;
                overflow: auto;
            }
        </style>
    </head>
    <body>
        <div id="panel">
            <h3>Vector Visualizer</h3>
            <p>Examples:</p>
            <ul>
                <li><strong>A = 3i + 4j</strong> (Defines point A)</li>
                <li><strong>\vec{AB} + \vec{BC}</strong></li>
                <li><strong>\frac{\vec{AB}+2i+3j}{2}</strong></li>
                <li>
                    <strong>\vec{AE} = \frac{\vec{AB}}{4}</strong> (<em>Define point E</em> as \(A + \frac{AB}{4}\))
                </li>
            </ul>
            <div id="input_form">
                <input type="text" id="vector_input" placeholder="Enter expression" />
                <button id="add_vector_button">Add</button>

                <div id="autocomplete_container">
                    <div id="autocomplete_suggestions"></div>
                    <div id="autocomplete_error"></div>
                </div>
                <div id="input_mirror"></div>
            </div>

            <div id="items_list"></div>
        </div>

        <div id="canvas_container"></div>

        <script src="https://cdn.jsdelivr.net/npm/p5@1.6.0/lib/p5.js"></script>                <script src="playground/globals.js"></script>
        <script src="playground/parser.js"></script>
        <script src="playground/drawing.js"></script>
        <script src="playground/autocomplete.js"></script>
        <script src="playground/ui.js"></script>
    </body>
</html>
